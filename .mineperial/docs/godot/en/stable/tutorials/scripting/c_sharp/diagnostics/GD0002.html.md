## GD0002  
**Missing partial modifier on declaration of type which contains nested classes that derive from `GodotObject`**

This diagnostic warns when a C# type that inherits from `GodotObject` contains one or more nested classes that also inherit from `GodotObject`, but the outer type itself is **not** declared as `partial`. Godot requires the outer type to be `partial` in order to correctly register all `GodotObject` subclasses.

| Property | Value |
|----------|-------|
| **Rule ID** | `GD0002` |
| **Category** | Usage |
| **Breaking?** | Non‑breaking |
| **Enabled by default** | ✅ Yes |

### Cause

A type that derives from `GodotObject` is contained in a non‑partial type and itself contains nested types that also derive from `GodotObject`. The `partial` keyword is necessary so that Godot’s code generator can attach the required metadata to every nested subclass.

Example of a problem:

```csharp
public class Outer : Godot.Node
{
    public class Inner : Godot.Node2D { }
}
```

`Outer` is not `partial`, yet it contains `Inner`, which is also a `GodotObject`. The compiler will compile, but Godot will not be able to register the `Inner` class properly.

### Fix

Declare the outer type as `partial` (or move the nested `GodotObject` subclass to a separate file).

```csharp
public partial class Outer : Godot.Node
{
    public class Inner : Godot.Node2D { }
}
```

or

```csharp
// Outer.cs
public partial class Outer : Godot.Node { }

// Inner.cs
public partial class Inner : Godot.Node2D { }
```

### Why it matters

When Godot loads a scene or registers a script, it relies on the metadata generated by the C# compiler for every type that inherits from `GodotObject`. If a nested `GodotObject` subclass is inside a non‑partial outer class, the metadata is incomplete and the engine may fail to instantiate the subclass at runtime, leading to crashes or unexpected behaviour.

### Related rules

* **GD0001 – Missing partial modifier on declaration of type that derives from `GodotObject`** – applies when the outer type itself inherits from `GodotObject`.
* **GD0003 – Found multiple classes with the same name in the same script file** – related to class naming conflicts that can also arise in nested contexts.

---

> **Tip**  
> When you create a complex class that hosts several `GodotObject` subclasses (e.g., a manager with inner helper classes), always mark the outer class as `partial` to keep Godot happy.  

> **Further reading**  
> • [C# scripting guide](https://docs.godotengine.org/en/stable/tutorials/scripting/c_sharp/index.html)  
> • [Godot's C# integration internals](https://docs.godotengine.org/en/stable/tutorials/scripting/c_sharp/advanced/c_sharp_assembly.html)