**NavigationAgent3D** – Godot Engine (stable) documentation  
===

> **Experimental** – This class may be changed or removed in future versions.  

`NavigationAgent3D` inherits from `Node3D` and provides a 3‑D agent that can path‑find to a target position while avoiding obstacles.

---

## Class Description

A **3D navigation agent** that automatically calculates a path to a given destination using the navigation system.  
It is typically used for AI characters that need to move around the scene, following the navigation mesh and dynamically avoiding obstacles.

---

## Inheritance

```
Object
 └─ Node
   └─ Node3D
     └─ NavigationAgent3D
```

---

## Signals

| Signal | Description |
|--------|-------------|
| `velocity_changed(Vector3 new_velocity)` | Emitted when the agent’s velocity changes. |
| `path_changed()` | Emitted when the current path is recalculated or cleared. |
| `navigation_failed()` | Emitted when the agent cannot find a path to the target. |

---

## Properties

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `target_position` | `Vector3` | `Vector3.ZERO` | Destination point the agent will navigate towards. |
| `radius` | `float` | `1.0` | The radius of the agent for collision avoidance. |
| `avoidance_enabled` | `bool` | `true` | Whether the agent should use the avoidance system. |
| `target_desired_velocity` | `Vector3` | `Vector3.ZERO` | Desired velocity when the agent is moving along the path. |
| `path_max_distance` | `float` | `200.0` | The maximum distance at which a path will be considered valid. |
| `path_margin` | `float` | `0.3` | The margin to apply when generating a path. |
| `target_velocity` | `Vector3` | `Vector3.ZERO` | Current velocity of the agent. |
| `velocity` | `Vector3` | `Vector3.ZERO` | Read‑only velocity value. |
| `path` | `PoolVector3Array` | `[]` | The current path calculated by the agent. |

---

## Methods

| Method | Return Type | Description |
|--------|-------------|-------------|
| `set_target_position(Vector3 position)` | `void` | Sets the destination point for the agent. |
| `get_target_position()` | `Vector3` | Returns the currently set destination. |
| `get_next_path_position()` | `Vector3` | Returns the next point on the current path. |
| `is_target_reached()` | `bool` | Checks whether the agent has reached its target. |
| `clear_path()` | `void` | Clears the current path. |
| `get_path()` | `PoolVector3Array` | Returns the entire path as an array of points. |
| `set_navigation_parent(Node3D node)` | `void` | Sets the parent node to use for navigation queries. |
| `set_avoidance_enabled(bool enable)` | `void` | Enables or disables dynamic avoidance. |
| `is_avoidance_enabled()` | `bool` | Returns whether avoidance is enabled. |
| `set_target_desired_velocity(Vector3 velocity)` | `void` | Sets the velocity the agent should try to achieve. |
| `get_target_desired_velocity()` | `Vector3` | Returns the desired velocity. |

> **Note:** Many of the methods above are auto‑generated by Godot’s scripting API and can be called from GDScript, C#, or any other supported language.

---

## Usage Example (GDScript)

```gdscript
extends CharacterBody3D

@onready var navigation_agent : NavigationAgent3D = $NavigationAgent3D

func _ready():
    navigation_agent.target_position = Vector3(10, 0, 5)

func _physics_process(delta):
    if navigation_agent.is_target_reached():
        return  # Destination reached

    var next_position = navigation_agent.get_next_path_position()
    var direction = (next_position - global_transform.origin).normalized()
    velocity = direction * 4.0
    move_and_slide()
```

---

## See Also

- [NavigationServer](https://docs.godotengine.org/en/stable/classes/class_navigationserver.html) – Low‑level navigation API.
- [NavigationRegion3D](https://docs.godotengine.org/en/stable/classes/class_navigationregion3d.html) – Defines a navigation mesh region.
- [NavigationLink3D](https://docs.godotengine.org/en/stable/classes/class_navigationlink3d.html) – Connects two navigation regions.

---

> **Experimental** – This class may be changed or removed in future Godot releases.  
> For the latest API details, refer to the [official Godot documentation](https://docs.godotengine.org/en/stable/classes/class_navigationagent3d.html).