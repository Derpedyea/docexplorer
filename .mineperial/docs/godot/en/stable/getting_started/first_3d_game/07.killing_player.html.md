**Killing the player**  
*Godot Engine (stable) – “Your first 3‑D game” tutorial, step 7*  

---

## 1. Hitbox with the **Area** node

In this step we give the player a hitbox that can detect when an enemy touches him.  
The hitbox is an `Area3D` node with a `CollisionShape3D` child.

1. **Add an `Area3D`** as a child of the `Player` node.  
   *Name it `Hitbox` (or any name you prefer).*

2. **Add a `CollisionShape3D`** to the `Area3D`.  
   *Use a `BoxShape3D` or any shape that fits the player’s body.*

3. **Connect the signal**  
   In the inspector, connect the `body_entered` signal to the player script.

   ```gdscript
   # player.gd
   func _on_Hitbox_body_entered(body: Node) -> void:
       if body.is_in_group("mobs"):
           # Player has been hit by a mob
           die()
   ```

4. **Define `die()`** in your script.  It will handle ending the game.

---

## 2. Ending the game

When the player dies we want to:

1. **Disable player movement** (so the player can’t run again).
2. **Show a “Game over” UI** (or a restart button).
3. **Optionally restart the current level**.

A minimal implementation:

```gdscript
# player.gd
var is_alive := true

func die() -> void:
    if not is_alive:
        return
    is_alive = false

    # Disable the physics body
    $CollisionShape3D.disabled = true

    # Show UI
    get_tree().root.get_node("Main/CanvasLayer/UI/GameOverLabel").visible = true
    get_tree().root.get_node("Main/CanvasLayer/UI/RestartButton").visible = true
```

In the **Main** scene add a UI layer with a `Label` and a `Button`.  
Connect the button’s `pressed` signal to a function that reloads the current scene:

```gdscript
# main.gd
func _on_RestartButton_pressed() -> void:
    get_tree().reload_current_scene()
```

---

## 3. Code checkpoint

Below is a compact version of the full `Player` script incorporating the
hit‑box and death logic.  Replace the placeholder paths (`$…`) with the
actual node names in your scene.

```gdscript
# player.gd
extends CharacterBody3D

# Movement constants
const SPEED := 4.0
const JUMP_VELOCITY := 5.0

var is_alive := true

func _ready() -> void:
    # Connect hitbox signal
    $Hitbox.connect("body_entered", self, "_on_Hitbox_body_entered")

func _physics_process(delta: float) -> void:
    if not is_alive:
        return

    var input_dir = Input.get_vector("move_left", "move_right", "move_forward", "move_back")
    var direction = (transform.basis * Vector3(input_dir.x, 0, input_dir.y)).normalized()

    if direction.length() > 0:
        velocity.x = direction.x * SPEED
        velocity.z = direction.z * SPEED
    else:
        velocity.x = move_toward(velocity.x, 0, SPEED)
        velocity.z = move_toward(velocity.z, 0, SPEED)

    if Input.is_action_just_pressed("jump") and is_on_floor():
        velocity.y = JUMP_VELOCITY

    move_and_slide()

func _on_Hitbox_body_entered(body: Node) -> void:
    if body.is_in_group("mobs"):
        die()

func die() -> void:
    if not is_alive:
        return
    is_alive = false

    # Disable physics interactions
    $CollisionShape3D.disabled = true

    # Show UI elements
    var ui = get_tree().root.get_node("Main/CanvasLayer/UI")
    ui.get_node("GameOverLabel").visible = true
    ui.get_node("RestartButton").visible = true
```

> **Tip:** Keep all UI elements inside a separate `CanvasLayer` for
> simplicity, and make the `GameOverLabel` and `RestartButton`
> invisible by default (`visible = false`).  
> The `RestartButton` should connect its `pressed` signal to the
> `Main` scene’s `_on_RestartButton_pressed()` method described above.

--- 

### What to test

1. Run the game – jump on an enemy to squash it (continue functioning).  
2. Let a mob hit the player – the UI should appear and movement should stop.  
3. Press the restart button – the level should reset.

That’s the end of step 7; you’re ready to add score tracking and replay logic in the next tutorial.