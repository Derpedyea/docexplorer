**Coding the Player**

In this lesson we’ll add player movement, animation, and set it up to detect collisions.  
To do so, we need to add some functionality that we can’t get from a built‑in node, so we’ll script the player using GDScript.

---

## Choosing animations

The player node uses an `AnimationPlayer` (or `AnimatedSprite2D`) to play different movement animations.  
You’ll want to create a separate animation for each direction or for idle movement.

```gdscript
# Example: selecting the animation based on input
var animation_player

func _ready() -> void:
    animation_player = $AnimationPlayer

func _physics_process(delta: float) -> void:
    var direction = Vector2.ZERO
    if Input.is_action_pressed("ui_right"):
        direction.x += 1
    if Input.is_action_pressed("ui_left"):
        direction.x -= 1
    if Input.is_action_pressed("ui_down"):
        direction.y += 1
    if Input.is_action_pressed("ui_up"):
        direction.y -= 1

    if direction.length() > 0:
        animation_player.play("walk")
    else:
        animation_player.play("idle")
```

> **Tip:** Keep the animation names in sync with those defined in the `AnimationPlayer` node.

---

## Preparing for collisions

To detect collisions you’ll use the physics API (`move_and_slide`, `get_slide_collision`, etc.) on a `KinematicBody2D` (Godot 4 uses `CharacterBody2D`).  
Add a `CollisionShape2D` to the player and adjust its shape to fit the sprite.

```gdscript
extends CharacterBody2D

var speed: float = 200

func _physics_process(delta: float) -> void:
    var velocity = Vector2.ZERO

    if Input.is_action_pressed("ui_right"):
        velocity.x += 1
    if Input.is_action_pressed("ui_left"):
        velocity.x -= 1
    if Input.is_action_pressed("ui_down"):
        velocity.y += 1
    if Input.is_action_pressed("ui_up"):
        velocity.y -= 1

    velocity = velocity.normalized() * speed
    var collision = move_and_slide(velocity)

    if collision:
        # Handle collision, e.g., stop movement or bounce
        pass
```

- **`move_and_slide`** automatically applies velocity and handles sliding along surfaces.
- **`get_slide_collision()`** (or the `collision` variable above) gives information about the collision, such as the colliding object’s name or the surface normal.

---

### Additional Resources

- [Getting started → Your first 2D game → Creating the player scene](../step_by_step/creating_the_player_scene.html)  
- [Godot Engine 4.0 Docs – CharacterBody2D](https://docs.godotengine.org/en/stable/classes/class_characterbody2d.html)

Feel free to explore the rest of the tutorial for the complete script and how to integrate the player with the rest of the game!